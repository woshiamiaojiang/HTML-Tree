<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<style>
			table{border-collapse: collapse; border: 1px solid gray; border-width: 2px 1px 2px 1px;}
			th{border: 1px solid gray; padding: 4px; background-color: #ddd;}
			td{border: 1px solid gray; padding: 4px;}
			tr:nth-child(2n){background-color: #f8f8f8;}
			pre{border: 2px solid #d6d6d6; padding: 0px; border-radius: 3px;}
		</style>
	</head>
	<body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">
		<div>
			<div style="mso-element:para-border-div;border:solid #DBE5F1 3.0pt;padding:
0cm 0cm 0cm 0cm;background:#DBE5F1">
				<h2 align="left" style="margin-top:10.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;background:
#DBE5F1;border:none;mso-border-alt:solid #DBE5F1 3.0pt;padding:0cm;mso-padding-alt:
0cm 0cm 0cm 0cm"><span style="font-size:14.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;text-transform:
uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:normal">第</span><span lang="EN-US" style="font-size:14.0pt;line-height:115%;font-family:'Calibri',sans-serif;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">3</span><span style="font-size:14.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;text-transform:
uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:normal">讲</span><span style="font-size:14.0pt;line-height:115%;font-family:'Calibri',sans-serif;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal"> </span><span style="font-size:14.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;text-transform:
uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:normal">事务和锁</span><span lang="EN-US" style="font-size:14.0pt;line-height:115%;font-family:'Calibri',sans-serif;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal"><o:p></o:p></span>
				</h2>
			</div>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307796"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">1.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">什么是事务</span></em></a><span style="mso-bookmark:_Toc244307796"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal">?</span></em></span><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l4 level2 lfo1;
tab-stops:list 42.0pt"><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt 'Times New Roman'">&nbsp; </span></span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">所谓事物是一个原子操作，也就是说一个事物中的多条</span><span lang="EN-US">SQL</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">语句要么一起成功，要么一起失败。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">先举一个银行转账的例子：创建一个账户表并插入两条测试数据：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">create table
account(<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp; </span>accountNo varchar2(20) primary key,<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp; </span>balance number(10,2) not null<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">);<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">insert into
account values(&apos;A0001&apos;, 5000);<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">insert into
account values(&apos;A0002&apos;, 1000);<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">现在模拟一次转账操作</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update account
set balance = balance - 500 where accountNo = &apos;A0001&apos;;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update account
set balance = balance + 500 where accountNo = &apos;A0002&apos;;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">假设不将两次更新不看做一个完整操作的话，</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">第二次更新操作会失败，而第一次更新操作成功，则银行赚了。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">第一次更新操作会失败，而第二次更新操作成功，则</span><span lang="EN-US">A0002</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">用户赚了。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">提供了将多条</span><span lang="EN-US">DML</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">语句作为一次原子操作的办法：任意一条</span><span lang="EN-US">INSERT UPDATE DELETE </span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">语句会让事务开始，接下来的</span><span lang="EN-US">INSERT UPDATE DELETE</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">都会处于同一事务当中，这些操作，作为一个整体，要么都成功，要么都撤销。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">例如上面的转账操作：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update account
set balance = balance - 500 where accountNo = &apos;A0001&apos;;<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>-- </span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update account
set balance = balance + 500 where accountNo = &apos;A0002&apos;; <span style="mso-tab-count:
1">&nbsp; </span>-- </span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">加入事务</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">commit;<span style="mso-tab-count:14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>--</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">commit</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">表示事务结束，并将这次事务中所作出的更改影响到数据文件，这称之为提交</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">又如：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update account
set balance = balance - 500 where accountNo = &apos;A0001&apos;;<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp; </span>-- </span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update account
set balance = balance + 500 where accountNo = &apos;A0002&apos;; <span style="mso-tab-count:
1">&nbsp; </span>-- </span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">加入事务</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">假设第二条更新执行失败，那么取</span><span lang="EN-US">commit</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">代之的是执行一条</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">rollback; </span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">也代表事务结束，并将这次事务中所作出的更改都撤销，状态恢复到事务开始之前，这称为回滚。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 42.0pt"><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt 'Times New Roman'">&nbsp; </span></span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">事务执行的前后数据的状态是一致的</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始前，和事务结束后，两个账户的总余额应当一致都是</span><span lang="EN-US">6000<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307797"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">2.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:宋体;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">SAVEPOINT</span></em></a><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:宋体;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">如果不希望撤销本次事务内所有的操作需要设置</span><span lang="EN-US">savepoint<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">例：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">insert…<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">savepoint a;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">delete<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">rollback to a;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">commit;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">撤销的是</span><span lang="EN-US">delete</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">操作，注意此时事务仍为结束，需要再使用</span><span lang="EN-US">rollback</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">或</span><span lang="EN-US">commit</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">来保证原子性</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307798"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">3.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">事务的开始和结束</span></em></a><span style="mso-bookmark:_Toc244307798"></span><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 42.0pt"><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt 'Times New Roman'">&nbsp; </span></span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">对于</span><span lang="EN-US">DML</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">语句事务在执行</span><span lang="EN-US">INSERT
UPDATE DELETE</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">之一时开始</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">当执行</span><span lang="EN-US">COMMIT</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">或</span><span lang="EN-US">ROLLBACK</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">时结束</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 42.0pt"><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt 'Times New Roman'">&nbsp; </span></span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">对于</span><span lang="EN-US">DDL DCL</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">来说，事务在执行</span><span lang="EN-US">CREATE
ALTER DROP GRANT REVOKE</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">等语句时，执行成功则提交事务，失败不会影响当前事务</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307799"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">4.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">什么是锁</span></em></a><span style="mso-bookmark:_Toc244307799"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal">?</span></em></span><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">引入：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l2 level2 lfo3;
tab-stops:list 42.0pt"><span lang="EN-US" style="mso-fareast-font-family:
'Times New Roman'"><span style="mso-list:Ignore">1)<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">现实生活中的锁，是为了保护私有财产</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l2 level2 lfo3;
tab-stops:list 42.0pt"><span lang="EN-US" style="mso-fareast-font-family:
'Times New Roman'"><span style="mso-list:Ignore">2)<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span lang="EN-US">Java</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">中的</span><span lang="EN-US">synchronized</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">，是为了保护多个线程访问共享资源</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l2 level2 lfo3;
tab-stops:list 42.0pt"><span lang="EN-US" style="mso-fareast-font-family:
'Times New Roman'"><span style="mso-list:Ignore">3)<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">中的锁，是为了保护多个连接同时修改同一条（组）数据</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">换句话说，锁是数据库对并发访问数据的一种保护机制</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307800"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">5.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">什么时候应用锁</span></em></a><span style="mso-bookmark:_Toc244307800"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal">?</span></em></span><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">数据库会在修改数据的同时，<span style="background:yellow;mso-highlight:yellow">自动</span>给要修改的数据加锁。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">当执行</span><span lang="EN-US">insert update delete </span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">这些语句时：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始，并且对这些语句影响到的记录加锁</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">当事务结束</span><span lang="EN-US">(commit, rollback ) </span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">释放刚才加的锁</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">例：模拟两个数据库连接同时更新同一条数据的情况，打开两个</span><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端（</span><span lang="EN-US">SQLPlus</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">），客户端一执行</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 1000 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二执行：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 600 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">观察发现，后执行的更新语句发生了等待现象。这说明，锁对于并发访问的数据会采取保护，客户端一对</span><span lang="EN-US">7369</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">这条记录加上了锁，保护了起来。因此其他的客户端在他修改完毕之前，都只能等待，这种等待称之为被阻塞</span><span lang="EN-US">(block)</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">直到客户端一执行</span><span lang="EN-US">commit(</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">或</span><span lang="EN-US">rollback)</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">，表示客户端一结束了修改操作。这时客户端二才能结束等待，并给</span><span lang="EN-US">7369</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">加一把新的锁。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">如果有多个客户端对同一记录同时进行修改操作，一个客户端向记录加锁，其他客户端就都处于阻塞</span><span lang="EN-US">(block)</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">状态。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307801"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">6.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:宋体;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">Oracle</span></em></a><span style="mso-bookmark:_Toc244307801"><em style="mso-bidi-font-style:normal"><span style="font-size:12.0pt;mso-bidi-font-size:
15.0pt;line-height:115%;font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;color:#243F60;text-transform:uppercase;
letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:normal">数据库中锁的特点</span></em></span><span style="mso-bookmark:_Toc244307801"></span><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:宋体;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l3 level1 lfo5;
tab-stops:list 42.0pt"><span lang="EN-US" style="mso-fareast-font-family:
'Times New Roman'"><span style="mso-list:Ignore">1)<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">使用<span style="background:lime;
mso-highlight:lime">行级锁</span></span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">执行增删改时给数据加的锁是以行为单位的，例：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">尝试修改同一表中的不同记录</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一执行</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 1000 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二执行：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 600 where empno = 7788;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">可以发现，这两条</span><span lang="EN-US">SQL</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">语句没有发生阻塞的情况。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l3 level1 lfo5;
tab-stops:list 42.0pt"><span lang="EN-US" style="mso-fareast-font-family:
'Times New Roman';background:aqua;mso-highlight:aqua"><span style="mso-list:
Ignore">2)<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman';
background:aqua;mso-highlight:aqua">查询（</span><span lang="EN-US" style="background:aqua;mso-highlight:aqua">select </span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman';background:aqua;mso-highlight:aqua">语句）永远不会被阻塞</span><span lang="EN-US" style="background:aqua;mso-highlight:aqua"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">例：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一执行</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 1000 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二执行：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">select * from
emp;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">可以发现两条</span><span lang="EN-US">SQL</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">互不干扰。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l3 level1 lfo5;
tab-stops:list 42.0pt"><span lang="EN-US" style="mso-fareast-font-family:
'Times New Roman'"><span style="mso-list:Ignore">3)<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span lang="EN-US">select … <span style="background:yellow;mso-highlight:yellow">for update;</span><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">中有一种特殊的</span><span lang="EN-US">select</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">语句，就是在</span><span lang="EN-US">select</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">的最后加上</span><span lang="EN-US">for
update</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">子句，这条语句的效果类似于</span><span lang="EN-US">update insert delete</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">，也会开启事务，并给查询到的记录加锁。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">用途：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">如果依照上例进行操作</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一执行</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 1000 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二执行：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 600 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">如果客户端一迟迟（或永远）不结束事务，那么包括客户端二在内的其他客户端都将一直处于阻塞状态。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">这个现象告诉我们，良好的编程习惯包括：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:63.0pt;text-indent:-63.0pt;mso-text-indent-alt:
-21.0pt;mso-list:l2 level3 lfo3;tab-stops:list 63.0pt"><span lang="EN-US" style="mso-fareast-font-family:'Times New Roman';background:lime;
mso-highlight:lime"><span style="mso-list:Ignore"><span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>i.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman';
background:lime;mso-highlight:lime">要注意事务的正确结束</span><span lang="EN-US" style="background:lime;mso-highlight:lime"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:63.0pt;text-indent:-63.0pt;mso-text-indent-alt:
-21.0pt;mso-list:l2 level3 lfo3;tab-stops:list 63.0pt"><span lang="EN-US" style="mso-fareast-font-family:'Times New Roman'"><span style="mso-list:Ignore"><span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>ii.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">去获得锁之前，应当看看是不是别人已经获得了锁，再采取相应的策略</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">对于第</span><span lang="EN-US">ii.</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">点，可以在</span><span lang="EN-US">select … for update</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">语句后加入</span><span lang="EN-US">wait n</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">或</span><span lang="EN-US">nowait</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">来限制等待超时或根本不等待。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">例如：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一执行</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 1000 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二执行：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">select * from
emp where empno = 7369 for update wait 5;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 600 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">则客户端二会尝试等待</span><span lang="EN-US">5</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">秒，</span><span lang="EN-US">5</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">秒之内无法获得锁，则出现异常结束等待。当然</span><span lang="EN-US">5</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">秒之内如果客户端一释放了锁（事务提交或回滚）则客户端二获得记录</span><span lang="EN-US">7369</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">的锁，并开启它的事务。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">或者</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二执行：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">select * from
emp where empno = 7369 for update nowait;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">update emp set
sal = sal + 600 where empno = 7369;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">则客户端二执行</span><span lang="EN-US">select… for update</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">语句时会检测</span><span lang="EN-US">7369</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">记录上是否已经有别的数据库连接给该记录加锁，如果有，则出现异常并结束等待，如果没有则自己获得锁，开启事务。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307802"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">7.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">事务特性</span></em></a><span style="mso-bookmark:_Toc244307802"></span><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务特性是指</span><span lang="EN-US">ACID</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">这四个方面：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">A</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">（原子性）</span><span lang="EN-US">Atomicity<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">C</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">（一致性）</span><span lang="EN-US">Consistancy<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">I</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">（隔离性）</span><span lang="EN-US">isolation<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US">D</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">（持久性）</span><span lang="EN-US">Durability<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">前两条已经在第</span><span lang="EN-US">5</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">讲时讲过，持久性是指一个事务一旦成功完成，它对数据库的改变必须是永久的，即便是在系统遇到故障的情况下也不会丢失。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">下面重点讲述事务的隔离性。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307803"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">8.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">事务的隔离性以及隔离级别</span></em></a><span style="mso-bookmark:_Toc244307803"></span><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务隔离性主要体现在隔离级别上，数据库事务的隔离级别决定了两个并行事务间针对同一数据访问的可见性。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">数据库事务隔离级别分一下几种：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">没有事务</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">提交读</span><span lang="EN-US">(read committed)<span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>--
oracle </span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">支持（默认）</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">可重复读</span><span lang="EN-US">(repeatable read)<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">序列化读</span><span lang="EN-US">(serializable read)<span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>--
oracle </span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">支持</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">这些概念较为抽象，可以从一些错误现象来引入隔离级别的必要性：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">以下例题中均假设员工</span><span lang="EN-US">7369</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">的原有工资为</span><span lang="EN-US">800<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">脏读：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="margin-left:23.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">备注</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">update emp set sal = 2000 <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:2.0"><span lang="EN-US">where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">查询工资结果为</span><span lang="EN-US">2000</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">，<span style="background:lime;mso-highlight:lime">用于计算肯定出错</span></span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;mso-yfti-lastrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">rollback;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">脏读现象就是指客户端二在查询的过程中，查询到了<span style="background:lime;mso-highlight:lime">无效的数据（脏数据</span>），值得庆幸的是，该现象在使用</span><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">的过程中，从未出现过，这时因为</span><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">默<span style="background:lightgrey;mso-highlight:lightgrey">认的事务隔离级别为提交读，该隔离级别就是为了防止发生这种脏读现象的</span>。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">在<span style="background:yellow;mso-highlight:yellow">提交读</span>的隔离级别下，读到的数据总是事务开始前，或事务结束后的，不会是一个中间状态的数据：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">情况</span><span lang="EN-US">A<o:p></o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="margin-left:23.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">备注</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">update emp set sal = 2000 <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:2.0"><span lang="EN-US">where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">查询在客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">的事务结束前运行，工资结果为</span><span lang="EN-US">800<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;mso-yfti-lastrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">情况</span><span lang="EN-US">B<o:p></o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="margin-left:23.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">备注</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">update emp set sal = 2000 <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:2.0"><span lang="EN-US">where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;mso-yfti-lastrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">查询在客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">的事务结束后运行，工资结果为</span><span lang="EN-US">2000<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">对于大多数的应用，设置为提交读的隔离级别就足够用了，但提交读无法防止下列错误现象，不可重复读：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="margin-left:23.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">备注</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">update emp set sal = 2000 <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:2.0"><span lang="EN-US">where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">第一次查询到的工资为</span><span lang="EN-US">800<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:4;mso-yfti-lastrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">第二次查询到的工资为</span><span lang="EN-US">2000<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">对于客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">来说，它的两次查询结果出现了不一致的情况，<span style="background:lime;mso-highlight:lime">用于计算，也可能导致错误</span></span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">对于这种现象，改变客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">的事物隔离级别为可重复读就能够避免，但</span><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">没有提供这样一种隔离级别，它采用了另外的办法：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">情况</span><span lang="EN-US">A</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">（客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务先开始）</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="margin-left:23.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">备注</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369 <span style="background:yellow;mso-highlight:yellow">for
&nbsp; update;</span><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US">,</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">第一次查询到的工资为</span><span lang="EN-US">800<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">第一次查询到的工资仍为</span><span lang="EN-US">800<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:4;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">update emp set sal = 2000 <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:2.0"><span lang="EN-US">where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:5;mso-yfti-lastrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">情况</span><span lang="EN-US">B</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">（客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务先开始）</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="margin-left:23.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">备注</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">update emp set sal = 2000 <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:2.0"><span lang="EN-US">where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369 <span style="background:yellow;mso-highlight:yellow">for
&nbsp; update;</span><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US">,</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">第一次查询到的工资为</span><span lang="EN-US">2000<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:4;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select sal from emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;
&nbsp; </span>where empno = 7369;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">第一次查询到的工资仍为</span><span lang="EN-US">2000<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:5;mso-yfti-lastrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">可以看到，客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">的两次（或多次查询所得结果是一致的）事务和锁的特性决定了查询和更新操作要分个先后。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">但即使将数据库的事务隔离级别设置为可重复读，或者使用了</span><span lang="EN-US">Oracle</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">的</span><span lang="EN-US">SELECT … FOR UPDATE</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">语句，仍然无法避免下面的现象，幻读：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="margin-left:23.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">备注</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select * from emp <span style="background:
  yellow;mso-highlight:yellow">for update;</span><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始，查询到记录总数应为</span><span lang="EN-US">14</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">条，并锁定了此</span><span lang="EN-US">14</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">条记录</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">insert into emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:10.5pt;mso-char-indent-count:1.0"><span lang="EN-US">(empno, ename,deptno) <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:10.5pt;mso-char-indent-count:1.0"><span lang="EN-US">values (7777, &apos;TOM&apos;,10);<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始，<span style="background:lime;mso-highlight:lime">客户端</span></span><span lang="EN-US" style="background:lime;mso-highlight:lime">2</span><span style="font-family:
  '微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:
  'Times New Roman';background:lime;mso-highlight:lime">的锁定操作无法影响新插入的记录</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:4;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select * from emp;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">查询到的记录总数为</span><span lang="EN-US">15</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">条，比第一次多出一条，突然冒出来的</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:5;mso-yfti-lastrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman';
background:yellow;mso-highlight:yellow">注意：</span><span style="font-family:
'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:
'Times New Roman'">这里请区分不可重复读和幻读的产生情况，不可重复读是更新（或删除）记录时会发生，而幻读是插入记录时会发生</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">解决幻读的方法是设置客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">的事务隔离级别为序列化读，方法如下：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="margin-left:23.4pt;border-collapse:collapse;border:none;mso-border-alt:
 solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端一</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端二</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">备注</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">set transaction isolation level
&nbsp; serializable;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">设置事务隔离级别，与此同时，事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select * from emp;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">查询到的记录总数为</span><span lang="EN-US">14</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">条</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">insert into emp <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:10.5pt;mso-char-indent-count:1.0"><span lang="EN-US">(empno, ename,deptno) <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="text-indent:10.5pt;mso-char-indent-count:1.0"><span lang="EN-US">values (7777, &apos;TOM&apos;,10);<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:4;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务</span><span lang="EN-US">&nbsp;</span><span style="font-family:'微软雅黑',sans-serif;
  mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman';
  background:lightgrey;mso-highlight:lightgrey">阻塞</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:5;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">select * from emp;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">查询到的记录总数仍为</span><span lang="EN-US">14</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">条</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:6;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">2</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:7;mso-yfti-lastrow:yes;height:15.55pt">&nbsp; 
						<td width="180" valign="top" style="width:135.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="197" valign="top" style="width:148.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="138" valign="top" style="width:103.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  15.55pt">&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">客户端</span><span lang="EN-US">1</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman';
background:yellow;mso-highlight:yellow">要注意的是</span><span style="font-family:
'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:
'Times New Roman'">：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 42.0pt"><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt 'Times New Roman'">&nbsp; </span></span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">序列化读并不是有些同学理解的阻止其他事务同时执行，而是在此事务隔离级别下，就好像只有自己操作数据库一样。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 42.0pt"><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt 'Times New Roman'">&nbsp; </span></span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">如果其他事务对表中某条记录做更新操作，则序列化事务中再对同一条记录更新，<span style="background:lime;mso-highlight:lime">不会阻塞</span>，但会抛出异常。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:42.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 42.0pt"><span lang="EN-US" style="font-family:
Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:Wingdings"><span style="mso-list:Ignore">l<span style="font:7.0pt 'Times New Roman'">&nbsp; </span></span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">如果希望设置事务隔离级别为读提交，则执行</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span lang="EN-US">set transaction isolation level read committed;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">但实际这句话在</span><span lang="EN-US">SQLPlus</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">里没有什么用处，因为默认就是。即使设置为序列化读之后，事务一旦结束仍会将隔离级别自动变回读提交</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<div style="mso-element:para-border-div;border-top:solid #4F81BD 1.0pt;
border-left:solid #4F81BD 1.0pt;border-bottom:none;border-right:none;
mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:solid #4F81BD .75pt;
padding:2.0pt 0cm 0cm 2.0pt">
				<h3 align="left" style="margin-top:15.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:21.0pt;margin-bottom:.0001pt;text-align:left;text-indent:-21.0pt;
line-height:115%;mso-pagination:widow-orphan;page-break-after:auto;mso-list:
l1 level1 lfo4;border:none;mso-border-top-alt:solid #4F81BD .75pt;mso-border-left-alt:
solid #4F81BD .75pt;padding:0cm;mso-padding-alt:2.0pt 0cm 0cm 2.0pt"><a name="_Toc244307804"><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;
font-family:'Calibri',sans-serif;mso-fareast-font-family:Calibri;mso-bidi-font-family:
Calibri;color:#243F60;text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:
0pt;font-weight:normal"><span style="mso-list:Ignore">9.<span style="font:7.0pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></em><em style="mso-bidi-font-style:normal"><span style="font-size:12.0pt;mso-bidi-font-size:15.0pt;line-height:115%;font-family:
宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;color:#243F60;
text-transform:uppercase;letter-spacing:.75pt;mso-font-kerning:0pt;font-weight:
normal">隔离级别的应用</span></em></a><span style="mso-bookmark:_Toc244307804"></span><em style="mso-bidi-font-style:normal"><span lang="EN-US" style="font-size:12.0pt;
mso-bidi-font-size:15.0pt;line-height:115%;font-family:'Calibri',sans-serif;
mso-fareast-font-family:宋体;color:#243F60;text-transform:uppercase;letter-spacing:
.75pt;mso-font-kerning:0pt;font-weight:normal"><o:p></o:p></span></em>
				</h3>
			</div>
			<p class="MsoNormal" style="margin-left:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">隔离级别由低到高为提交读、可重复读、序列化读。但并不是隔离级别设置的越高越好，越高的隔离级别意味着并发性越差（能同时处理的用户数）。一般的业务需求中提交读隔离级别就可以满足。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>A:</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">这可能是学员常问的一个问题，因为隔离级别一般并不常用。可以告诉学员，只要掌握最常用的提交读就足够了，一般的业务需求中提交读隔离级别就可以满足。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">可以提前举一个丢失更新的例子：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal"><span lang="EN-US"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">小王和他的妻子小张共用一个银行卡，某一天发生了这样一件事：小王在家利用网络修改银行卡密码，小张在取款机上取钱。假设银行系统的表结构是这样的：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US">drop table account;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US">create table account<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US">(<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>accountNo varchar2(19)
primary key,<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>password varchar2(6)
not null,<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>balance number(20,2)
not null<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US">);<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US">insert into account values(&apos;1234567891234567890&apos;,&apos;123456&apos;,4000.00);<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US">commit;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">假设银行的应用程序是这样设计的：</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd;
text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">为了设计一个通用的修改程序，用一个方法修改密码，也可以修改余额，将此操作分为三步，第一、查询旧值，第二、更改新值，第三、提交</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd;
text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">第一步：</span><span lang="EN-US">select accountNo, password, balance from account where accountNo =
?;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd;
text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">第二步：</span><span lang="EN-US">update account set password = ?, balance = ? where accountNo = ?;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd;
text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">第三步：</span><span lang="EN-US">commit;<o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd;
text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">第一步中查询出旧的密码和余额的值</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">在第二步中如果修改的是密码，那么第一个</span><span lang="EN-US">?</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">取值就是新密码，第二个</span><span lang="EN-US">?</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">取值是旧余额。如果修改的是余额，那么第一个</span><span lang="EN-US">?</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">取值就是旧密码，第二个</span><span lang="EN-US">?</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">取值是新余额。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
mso-hansi-font-family:'Times New Roman'">此程序在大多数情况下运行没有问题，但请分析下表情况</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:21.0pt;mso-para-margin-left:2.0gd"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
			<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" width="600" style="width:450.0pt;margin-left:-12.6pt;border-collapse:collapse;border:none;
 mso-border-alt:solid windowtext .75pt;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
 mso-border-insideh:.75pt solid windowtext;mso-border-insidev:.75pt solid windowtext"> 
				<tbody>
					<tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:23.05pt">&nbsp; 
						<td width="72" valign="top" style="width:54.0pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">时间</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">小王</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">小张</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:1;height:23.05pt">&nbsp; 
						<td width="72" valign="top" style="width:54.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">10:00:00<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">select * from account <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">where accountNo
&nbsp; <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">=
&nbsp; &apos;1234567891234567890&apos;;<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">小王查询出的旧值分别为</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">PASSWORD<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>BALANCE<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">-------- <span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>----------------------<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">123456<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>4000.00<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:2;height:23.05pt">&nbsp; 
						<td width="72" valign="top" style="width:54.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">10:00:01<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">select * from account <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">where accountNo
&nbsp; <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">=
&nbsp; &apos;1234567891234567890&apos;;<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
  'Times New Roman';mso-hansi-font-family:'Times New Roman'">小张查询出的旧值分别为</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">PASSWORD<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>BALANCE<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">-------- <span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>----------------------<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">123456<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>4000.00<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:3;height:23.05pt">&nbsp; 
						<td width="72" valign="top" style="width:54.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">10:00:02<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">小王更新密码，余额使用旧值，事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:8.2pt;mso-para-margin-left:.28gd;
  text-indent:-5.25pt;mso-char-indent-count:-.5"><span lang="EN-US">update
&nbsp; account set password = &apos;654321&apos;, balance = 4000.00 <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">where accountNo
&nbsp; <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">=
&nbsp; &apos;1234567891234567890&apos;;<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:4;height:23.05pt">&nbsp; 
						<td width="72" valign="top" style="width:54.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">10:00:03<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:5;height:23.05pt">&nbsp; 
						<td width="72" valign="top" style="width:54.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">10:00:04<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">小张取款，密码使用旧值，事务开始</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:8.2pt;mso-para-margin-left:.28gd;
  text-indent:-5.25pt;mso-char-indent-count:-.5"><span lang="EN-US">update
&nbsp; account set password = &apos;123456&apos;, balance = 3000.00 <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">where accountNo
&nbsp; <o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
  text-indent:5.25pt;mso-char-indent-count:.5"><span lang="EN-US">= &apos;1234567891234567890&apos;;<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:6;height:23.05pt">&nbsp; 
						<td width="72" valign="top" style="width:54.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">10:00:05<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">commit;<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">事务结束</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr> 
					<tr style="mso-yfti-irow:7;mso-yfti-lastrow:yes;height:23.05pt">&nbsp; 
						<td width="72" valign="top" style="width:54.0pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">10:00:06<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">查询</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">PASSWORD<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>BALANCE<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">-------- <span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>----------------------<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">123456<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>3000.00<o:p></o:p></span>
							</p>&nbsp; 
						</td>&nbsp; 
						<td width="264" valign="top" style="width:198.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 5.4pt 0cm 5.4pt;height:
  23.05pt">&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:'Times New Roman';
  mso-hansi-font-family:'Times New Roman'">查询</span><span lang="EN-US"><o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">PASSWORD<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>BALANCE<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal"><span lang="EN-US">-------- <span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>----------------------<o:p></o:p></span>
							</p>&nbsp; 
							<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd"><span lang="EN-US">123456<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>3000.00<o:p></o:p></span>
							</p>&nbsp; 
						</td> 
					</tr>
				</tbody>
			</table>
			<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
text-indent:18.05pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">可以发现，小王所作的修改密码操作丢失了，密码还是旧值。产生这个问题的本质原因是由于事务边界不正确划分，在</span><span lang="EN-US">10:00:01</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">小张查询出来的数据用在了</span><span lang="EN-US">10:00:04</span><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">分的更新操作，但这时的数据已经过期了（太旧了）。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
text-indent:18.05pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">这还不是最坏（最好</span><span lang="EN-US">?</span><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">）的情况，如果小张的更新操作先执行呢，账户的余额就不会改变，小王和小张只要配合默契，反复尝试（因为这个并发操作很难说谁先谁后），保不准就能赚上一笔。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
text-indent:18.05pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">还好现实生活中这种情况没有发生，程序员在设计程序时应当对于此情况给予充分考虑。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
text-indent:18.05pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">解决方法一，不采用通用更新方法，即更新密码一个方法，更新余额一个方法。</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="margin-left:2.95pt;mso-para-margin-left:.28gd;
text-indent:18.05pt"><span style="font-family:'微软雅黑',sans-serif;mso-ascii-font-family:
'Times New Roman';mso-hansi-font-family:'Times New Roman'">解决方法二，在查询时加锁，或者说将事务边界延伸至查询，对于此例是合适的，因为这样的并发更新不会发生太频繁</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:'微软雅黑',sans-serif;
mso-ascii-font-family:'Times New Roman';mso-hansi-font-family:'Times New Roman'">解决方法三，使用版本列来检测是否更新时使用了过期数据</span><span lang="EN-US"><o:p></o:p></span>
			</p>
			<p class="MsoNormal"><span lang="EN-US"><o:p>&nbsp;</o:p></span>
			</p>
		</div>
	
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="itemlink.js"></script></body>
</html>