<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><style>/*<![CDATA[*/
table{border: 1px solid gray;} td{border: 1px dotted gray;} p{margin: 3px 0 3px 0; padding: 0;} #ID_Footer{font-size: small; font-style: italic;} a{padding-right: 20px; background: URL(./icon_newwin.gif) no-repeat center right;} a[href ^= "mailto:"]{padding: 0 20px 0 0; background: URL(./icon_email.gif) no-repeat center right;} a[href ^= "nyf:"]{padding: 0 20px 0 0; background: URL(./icon_jump.gif) no-repeat center right;} 
/*]]>*/</style><title>单例模式</title></head><body>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">/**</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> * 饿汉式的单例模式</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> * 在类加载的时候创建单例实例，而不是等到第一次请求实例的时候的时候创建</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">* 1、私有 的无参数构造方法Singleton()，避免外部创建实例</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> * 2、私有静态属性instance</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> * 3、公有静态方法getInstance()</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> */</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">public</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> </span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">class</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton {</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">private</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> </span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">static</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton </span><span style="font-family: 微软雅黑; font-size: 11pt; font-style: italic; padding-left: 21pt">instance</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> = </span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">new</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton(); &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">private</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton(){ &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">public</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> </span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">static</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton getInstance(){ &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">return</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> </span><span style="font-family: 微软雅黑; font-size: 11pt; font-style: italic; padding-left: 21pt">instance</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">}</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">/**</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> * 懒汉式的单例模式</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> *在类加载的时候不创建单例实例，只有在第一次请求实例的时候的时候创建</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">*/</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">public</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> </span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">class</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton { &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">private</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> </span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">static</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton </span><span style="font-family: 微软雅黑; font-size: 11pt; font-style: italic; padding-left: 21pt">instance</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">private</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton(){ &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;/**</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; * 多线程情况的单例模式，避免创建多个对象</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;*/</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">public</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> </span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">static</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton getInstance(){</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">if</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">(</span><span style="font-family: 微软雅黑; font-size: 11pt; font-style: italic; padding-left: 21pt">instance</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> ==</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">null</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">){//避免每次加锁，只有第一次没有创建对象时才加锁</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">synchronized</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">(Singleton.</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">class</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">){//加锁，只允许一个线程进入</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">if</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">(</span><span style="font-family: 微软雅黑; font-size: 11pt; font-style: italic; padding-left: 21pt">instance</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">==</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">null</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">){ //只创建一次对象</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-style: italic; padding-left: 21pt">instance</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> = </span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">new</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> Singleton();</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 21pt">return</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> </span><span style="font-family: 微软雅黑; font-size: 11pt; font-style: italic; padding-left: 21pt">instance</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt"> &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 21pt">}</span></div>
<div><br /></div>
<div><br /></div>
<div id="ID_Footer" style="text-align: right; margin-top: 4em; padding-top: 4px; border-top: 2px solid gray">Generated with <a href="http://www.wjjsoft.com/mybase#htmltree" target="_blank">myBase/HtmlTree Maker</a> by <a href="http://www.wjjsoft.com/#htmltree" target="_blank">Wjj Software</a></div><script type="text/javascript" language="javascript" src="jquery.js;itemlink.js"></script>
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>