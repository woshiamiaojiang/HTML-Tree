<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><style>/*<![CDATA[*/
table{border: 1px solid gray;} td{border: 1px dotted gray;} p{margin: 3px 0 3px 0; padding: 0;} #ID_Footer{font-size: small; font-style: italic;} a{padding-right: 20px; background: URL(./icon_newwin.gif) no-repeat center right;} a[href ^= "mailto:"]{padding: 0 20px 0 0; background: URL(./icon_email.gif) no-repeat center right;} a[href ^= "nyf:"]{padding: 0 20px 0 0; background: URL(./icon_jump.gif) no-repeat center right;} 
/*]]>*/</style><title>线程池</title></head><body>
<div><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; color: #000000; line-height: 140%">什么是线程池</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;创建和销毁对象是非常耗费时间的</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;创建对象：需要分配内存等资源</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;销毁对象：虽然不需要程序员操心，但是垃圾回收器会在后台一直跟踪并销毁</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;对于经常创建和销毁、使用量特别大的资源，比如并发情况下的线程，对性能影响很大。</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;思路：创建好多个线程，放入线程池中，使用时直接获取引用，不使用时放回池中。可以避免频繁创建销毁、实现重复利用</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;生活案例：在尚学堂借用和归还电脑</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;技术案例：线程池、数据库连接池</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;JDK1.5起，提供了内置线程池</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; line-height: 140%">线程池的好处</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">提高响应速度（减少了创建新线程的时间） &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">降低资源消耗（重复利用线程池中线程，不需要每次都创建）</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">提高线程的可管理性：避免线程无限制创建、从而销毁系统资源，降低系统稳定性，甚至内存溢出或者CPU耗尽 &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 20pt; line-height: 140%">线程池的应用场合</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;需要大量线程，并且完成任务的时间端</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;对性能要求苛刻</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;接受突发性的大量请求</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; line-height: 140%">线程池的使用</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.concurrent.ExecutorService;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.concurrent.Executors;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%">/**</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> * </span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%">使用线程池执行</span><span style="font-family: Consolas; font-size: 11pt; text-decoration: underline; color: #3f5fbf; padding-left: 40pt; line-height: 140%">Runable</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%">命令</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> * &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> * </span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> * </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f9fbf; padding-left: 40pt; line-height: 140%">@author</span><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> Administrator</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> *</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> */</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">public</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">class</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> TestPool {</span></div>
<div><br /></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">public</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">static</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">void</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> main(String[] </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">args</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">) {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">创建一个具有可伸缩数量的线程的线程池</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//ExecutorService &nbsp;pool = Executors.newCachedThreadPool();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">创建一个具有固定线程数量的线程池</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//ExecutorService &nbsp;pool = Executors.newFixedThreadPool(5);</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">创建一个只有一个线程的线程池</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ExecutorService &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">pool</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> = Executors.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic; color: #000000; padding-left: 40pt; line-height: 140%">newSingleThreadExecutor</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">for</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">(</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">int</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> =0;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">&lt;20;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">++){</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">final</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">int</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">n</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> = </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Runnable </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">r</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> = </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">new</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> Runnable() {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #646464; padding-left: 40pt; line-height: 140%">@Override</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">public</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">void</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> run() {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; font-style: italic; color: #0000c0; padding-left: 40pt; line-height: 140%">out</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.println(</span><span style="font-family: Consolas; font-size: 11pt; color: #2a00ff; padding-left: 40pt; line-height: 140%">&quot;</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #2a00ff; padding-left: 40pt; line-height: 140%">线程开始</span><span style="font-family: Consolas; font-size: 11pt; color: #2a00ff; padding-left: 40pt; line-height: 140%">&quot;</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">+</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">n</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">);</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">try</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Thread.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic; color: #000000; padding-left: 40pt; line-height: 140%">sleep</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">(1000);</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">catch</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> (InterruptedException </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">e</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">) {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">e</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.printStackTrace();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; font-style: italic; color: #0000c0; padding-left: 40pt; line-height: 140%">out</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.println(</span><span style="font-family: Consolas; font-size: 11pt; color: #2a00ff; padding-left: 40pt; line-height: 140%">&quot;</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #2a00ff; padding-left: 40pt; line-height: 140%">线程结束</span><span style="font-family: Consolas; font-size: 11pt; color: #2a00ff; padding-left: 40pt; line-height: 140%">&quot;</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">+</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">n</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//pool.submit(r);</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">pool</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.execute(</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">r</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">);</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">pool</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.shutdown();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">}</span></div>
<div><br /></div>
<div><br /></div>
<div><br /></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.ArrayList;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.List;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.Random;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.concurrent.Callable;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.concurrent.ExecutionException;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.concurrent.ExecutorService;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.concurrent.Executors;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">import</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> java.util.concurrent.Future;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%">/**</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> * </span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%">使用线程池执行</span><span style="font-family: Consolas; font-size: 11pt; text-decoration: underline; color: #3f5fbf; padding-left: 40pt; line-height: 140%">Callable</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%">任务</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> * </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f9fbf; padding-left: 40pt; line-height: 140%">@author</span><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> Administrator</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> *</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #3f5fbf; padding-left: 40pt; line-height: 140%"> */</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">public</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">class</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> TestPool2 {</span></div>
<div><br /></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">public</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">static</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">void</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> main(String[] </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">args</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">) {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">开启线程池</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ExecutorService </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">service</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> = Executors.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic; color: #000000; padding-left: 40pt; line-height: 140%">newCachedThreadPool</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">执行</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">10</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">个任务并保存结果到集合</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;List&lt;Future&lt;String&gt;&gt; </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">list</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> = </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">new</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> ArrayList&lt;Future&lt;String&gt;&gt;();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">for</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">(</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">int</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">=0;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">&lt;10;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">++){ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MyCallable </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">callable</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> = </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">new</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> MyCallable(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Future&lt;String&gt; </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">task</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> = </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">service</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.submit(</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">callable</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">list</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.add(</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">task</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">输出</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">10</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">个任务的结果</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">for</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">(</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">int</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">=0;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">&lt;10;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">++){</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">try</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; font-style: italic; color: #0000c0; padding-left: 40pt; line-height: 140%">out</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.println(</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">list</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.get(</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">i</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">).get());</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">catch</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> (InterruptedException </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">e</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">) {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">e</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.printStackTrace();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">catch</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> (ExecutionException </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">e</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">) {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">e</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.printStackTrace();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">//</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #3f7f5f; padding-left: 40pt; line-height: 140%">关闭线程池</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 40pt; line-height: 140%">service</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">.shutdown();</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">class</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> MyCallable </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">implements</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> Callable&lt;String&gt;{</span></div>
<div><br /></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #646464; padding-left: 40pt; line-height: 140%">@Override</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">public</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> String call() </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">throws</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> Exception {</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">return</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #2a00ff; padding-left: 40pt; line-height: 140%">&quot;str&quot;</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">+</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 40pt; line-height: 140%">new</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> Random().nextInt(100);</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;}</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">}</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; line-height: 140%">线程池的类结构</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;Executor：线程池顶级接口，只有一个方法</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">  &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 20pt; line-height: 140%">ExecutorService</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">：真正的线程池接口</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 20pt; line-height: 140%">void</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%"> execute(Runnable </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 20pt; line-height: 140%">command</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%">)</span><span style="font-family: ????; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%"> </span><span style="font-family: 微软雅黑; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%">：执行任务/命令，没有返回值，</span><span style="font-family: 微软雅黑; font-size: 14pt; color: #3f5fbf; background-color: #e8f2fe; padding-left: 20pt; line-height: 140%">一般用来执行</span><span style="font-family: Consolas; font-size: 14pt; color: #3f5fbf; background-color: #e8f2fe; padding-left: 20pt; line-height: 140%">Runnable</span></div>
<div><span style="font-family: ????; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 20pt; line-height: 140%">task</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%">)</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%">：执行任务，有返回值，</span><span style="font-family: 微软雅黑; font-size: 14pt; color: #3f5fbf; background-color: #e8f2fe; padding-left: 20pt; line-height: 140%">一般又来执行</span><span style="font-family: Consolas; font-size: 14pt; text-decoration: underline; color: #3f5fbf; background-color: #e8f2fe; padding-left: 20pt; line-height: 140%">Callable</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 20pt; line-height: 140%">void</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%"> shutdown()</span><span style="font-family: ????; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%"> </span><span style="font-family: 微软雅黑; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%">：关闭连接池</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">  &nbsp; &nbsp; &nbsp; &nbsp;AbstractExecutorService：基本实现了ExecutorService的所有方法</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">  &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 20pt; line-height: 140%">ThreadPoolExecutor</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">：默认的线程池实现类</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;ScheduledThreadPoolExecutor：实现周期性任务调度的线程池</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">  &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; font-weight: bold; padding-left: 20pt; line-height: 140%">Executors</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%">：工具类、线程池的工厂类，用于创建并返回不同类型的线程池 &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">Executors.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic; color: #000000; padding-left: 60pt; line-height: 140%">newCachedThreadPool</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">()</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">：创建一个可根据需要创建新线程的线程池</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 60pt; line-height: 140%">Executors.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic; padding-left: 60pt; line-height: 140%">newFixedThreadPool</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 60pt; line-height: 140%">(</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">n</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 60pt; line-height: 140%">);</span><span style="font-family: ????; font-size: 11pt; padding-left: 60pt; line-height: 140%"> &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">创建一个可重用固定线程数的线程池</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">Executors.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic; color: #000000; padding-left: 60pt; line-height: 140%">newSingleThreadExecutor</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">()</span><span style="font-family: ????; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%"> </span><span style="font-family: 微软雅黑; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">：创建一个只有一个线程的线程池</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">Executors.</span><span style="font-family: Consolas; font-size: 11pt; font-style: italic; color: #000000; padding-left: 60pt; line-height: 140%">newScheduledThreadPool</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">(</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">n</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">)</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #000000; padding-left: 60pt; line-height: 140%">：创建一个线程池，它可安排在给定延迟后运行命令或者定期地执行。</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;理解线程池的构造方法</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 20pt; line-height: 140%">public</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #000000; background-color: #d4d4d4; padding-left: 20pt; line-height: 140%">ThreadPoolExecutor</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%">(</span></div>
<div><span style="font-family: ????; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; padding-left: 20pt; line-height: 140%">int</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; padding-left: 20pt; line-height: 140%">corePoolSize</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; padding-left: 20pt; line-height: 140%">,</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-family: ????; font-size: 11pt; color: #000000; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; line-height: 140%">int</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; line-height: 140%">maximumPoolSize</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%">,</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="font-family: ????; font-size: 11pt; color: #000000; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; font-weight: bold; color: #7f0055; line-height: 140%">long</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%"> </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; line-height: 140%">keepAliveTime</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%">,</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TimeUnit </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; line-height: 140%">unit</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%">,</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BlockingQueue&lt;Runnable&gt; </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; line-height: 140%">workQueue</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%">,</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ThreadFactory </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; line-height: 140%">threadFactory</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%">,</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RejectedExecutionHandler </span><span style="font-family: Consolas; font-size: 11pt; color: #6a3e3e; line-height: 140%">handler</span><span style="font-family: Consolas; font-size: 11pt; color: #000000; line-height: 140%">) {</span></div>
<div><span style="font-family: ????; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: ????; font-size: 11pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%">}</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 20pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">corePoolSize</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">：核心池的大小</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">默认情况下，创建了线程池后，线程数为0，当有任务来之后，就会创建一个线程去执行任务。</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">但是当线程池中线程数量达到</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 60pt; line-height: 140%">corePoolSize</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">，就会把到达的任务放到队列中等待。</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">maximumPoolSize</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">：最大线程数。</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 60pt; line-height: 140%">corePoolSize</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">和</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 60pt; line-height: 140%">maximumPoolSize</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">之间的线程数会自动释放，小于等于</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 60pt; line-height: 140%">corePoolSize</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">的不会释放。</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 60pt; line-height: 140%">当大于了这个值就会将任务由一个丢弃处理机制来处理。</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">keepAliveTime</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">：线程没有任务时最多保持多长时间后会终止</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;默认只限于</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">corePoolSize</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">和</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">maximumPoolSize</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">之间的线程</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">TimeUnit</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">：</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">keepAliveTime</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">的时间单位</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">BlockingQueue</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">：</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;存储等待执行的任务的阻塞队列，有多中选择，可以是顺序队列、链式队列等。</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">ThreadFactory </span></div>
<div><span style="font-family: ????; font-size: 11pt; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">线程工厂，默认是</span><span style="font-family: Consolas; font-size: 11pt; background-color: #d4d4d4; padding-left: 40pt; line-height: 140%">DefaultThreadFactory</span><span style="font-family: 微软雅黑; font-size: 11pt; background-color: #d4d4d4; padding-left: 40pt; line-height: 140%">，</span><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">Executors</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">的静态内部类</span></div>
<div><span style="font-family: Consolas; font-size: 11pt; padding-left: 40pt; line-height: 140%">RejectedExecutionHandler</span><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%">：</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;拒绝处理任务时的策略。如果线程池的线程已经饱和，并且任务队列也已满，对新的任务应该采取什么策略。</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 40pt; line-height: 140%"> &nbsp; &nbsp; &nbsp; &nbsp;比如抛出异常、直接舍弃、丢弃队列中最旧任务等</span><span style="font-family: 微软雅黑; font-size: 11pt; color: #000000; padding-left: 40pt; line-height: 140%">，默认是直接抛出异常。</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 80pt; line-height: 140%">1、CallerRunsPolicy：如果发现线程池还在运行，就直接运行这个线程</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 80pt; line-height: 140%">2、DiscardOldestPolicy：在线程池的等待队列中，将头取出一个抛弃，然后将当前线程放进去。</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 80pt; line-height: 140%">3、DiscardPolicy：什么也不做</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; padding-left: 80pt; line-height: 140%">4、AbortPolicy：java默认，抛出一个异常：</span></div>
<div><br /></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%">其他：</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%">1.线程池要保证单例（创建线程池的语句别写到循环中）</span></div>
<div><span style="font-family: 微软雅黑; font-size: 11pt; line-height: 140%">2.监控多线程执行的工具： &nbsp;jvisualvm.exe &nbsp; jconsole.exe &nbsp;jmc.exe</span></div>
<div><br /></div>
<div><br /></div>
<div><br /></div>
<div><br /></div>
<div><br /></div>
<div id="ID_Footer" style="text-align: right; margin-top: 4em; padding-top: 4px; border-top: 2px solid gray">Generated with <a href="http://www.wjjsoft.com/mybase#htmltree" target="_blank">myBase/HtmlTree Maker</a> by <a href="http://www.wjjsoft.com/#htmltree" target="_blank">Wjj Software</a></div><script type="text/javascript" language="javascript" src="jquery.js;itemlink.js"></script>
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="itemlink.js"></script></body></html>